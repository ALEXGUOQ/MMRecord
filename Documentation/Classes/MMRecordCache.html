<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="html/html; charset=utf-8" />
		<title>MMRecordCache Class Reference</title>
		<meta id="xcode-display" name="xcode-display" content="render"/>
		<meta name="viewport" content="width=550" />
		<link rel="stylesheet" type="text/css" href="../css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="../css/stylesPrint.css" />
		<meta name="generator" content="appledoc 2.0.5 (build 789)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="../index.html">MMRecord </a></h1>
				<a id="developerHome" href="../index.html">Mutual Mobile</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode">MMRecordCache Class Reference</h1>
			</div>
			<ul id="headerButtons" role="toolbar">
				<li id="toc_button">
					<button aria-label="Show Table of Contents" role="checkbox" class="open" id="table_of_contents"><span class="disclosure"></span>Table of Contents</button>
				</li>
				<li id="jumpto_button" role="navigation">
					<select id="jumpTo">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	
	
	
	
	<option value="tasks">Tasks</option>
	
	
	
	
	
	
	
	<option value="class_methods">Class Methods</option>
	
	<option value="//api/name/cacheRecords:withMetadata:forKey:fromContext:">&nbsp;&nbsp;&nbsp;&nbsp;+ cacheRecords:withMetadata:forKey:fromContext:</option>
	
	<option value="//api/name/getCachedResultsForRequest:cacheKey:metaKeyPath:context:cacheResultBlock:">&nbsp;&nbsp;&nbsp;&nbsp;+ getCachedResultsForRequest:cacheKey:metaKeyPath:context:cacheResultBlock:</option>
	
	<option value="//api/name/hasResultsForKey:">&nbsp;&nbsp;&nbsp;&nbsp;+ hasResultsForKey:</option>
	
	
	
	
	
</select>
				</li>
			</ul>
		</header>
		<nav id="tocContainer" class="isShowingTOC">
			<ul id="toc" role="tree">
				
<li role="treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#overview">Overview</a></span></li>




<li role="treeitem" id="task_treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#tasks">Tasks</a></span><ul>
	
</ul></li>







<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#class_methods">Class Methods</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/cacheRecords:withMetadata:forKey:fromContext:">cacheRecords:withMetadata:forKey:fromContext:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/getCachedResultsForRequest:cacheKey:metaKeyPath:context:cacheResultBlock:">getCachedResultsForRequest:cacheKey:metaKeyPath:context:cacheResultBlock:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/hasResultsForKey:">hasResultsForKey:</a></span></li>
	
</ul></li>




			</ul>
		</nav>
		<article>
			<div id="contents" class="isShowingTOC" role="main">
				<a title="MMRecordCache Class Reference" name="top"></a>
				<div class="main-navigation navigation-top">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="header">
					<div class="section-header">
						<h1 class="title title-header">MMRecordCache Class Reference</h1>
					</div>		
				</div>
				<div id="container">	
					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<td class="specification-title">Inherits from</td>
	<td class="specification-value">NSObject</td>
</tr><tr>
	<td class="specification-title">Declared in</td>
	<td class="specification-value">MMRecordCache.h<br />MMRecordCache.m</td>
</tr>
						</tbody></table></div>
					
					
					
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<p>This class encapsulates the functionality for caching managed objects in correspondence to a
particular NSURLRequest&rsquo;s NSCachedURLResponse. It is meant to be a private class used by <a href="../Classes/MMRecord.html">MMRecord</a>
should you wish to enable caching support for a given entity type. However, it could be used as a
standalone way to cache NSManagedObject&rsquo;s for a given NSURLRequest. Your milage may vary.</p>

<h2>Caching</h2>

<p>In general, the best way to implement caching is through the use of NSURLCache and the server&rsquo;s
implementation of the HTTP Cache Control headers.  In the event that this is not enough, <a href="../Classes/MMRecord.html">MMRecord</a>
does provide an additional level of caching support.  The caching provided by <a href="../Classes/MMRecord.html">MMRecord</a> is in
accordance with the cache control headers and augments the system provided by NSURLCache.
If caching is enabled then <a href="../Classes/MMRecord.html">MMRecord</a> will store the object IDs for each request/response pair that
were parsed as part of the last response in a separate SQLite persistent store.  It&rsquo;s important to
note that these are stored UNENCRYPTED.  IF DATA SECURITY IS A REQUIREMENT CACHING SHOULD NOT BE
USED!</p>

<h2>Configuration</h2>

<p>Please see the <a href="../Classes/MMRecord.html">MMRecord</a> header for more information about configuring your app to support caching.</p>
					</div>
					
					
					
					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						<h2 class="subtitle subtitle-tasks">Tasks</h2>
						
						
						
						

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/hasResultsForKey:">+&nbsp;hasResultsForKey:</a></code>
		<span class="tooltip"><p>This method returns YES if there are cached results for a given key. The key is typically the
absolute URL for a given NSURLRequest. You can specify the key using the cacheRecords method below.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/getCachedResultsForRequest:cacheKey:metaKeyPath:context:cacheResultBlock:">+&nbsp;getCachedResultsForRequest:cacheKey:metaKeyPath:context:cacheResultBlock:</a></code>
		<span class="tooltip"><p>This method retrieves cached results in a given context. If results are cached, it will fetch
those objectIDs from the internal caching persistent store and attempt to obtain records matching
those object IDs in the provided managed object context. Those records, along with the cached
response object (if any) will be returned in the cache result block. This method will also respect
the caching policy of the NSURLCache and of this NSURLRequest. If the response for that request is
not cached, no results will be returned &ndash; regardless of what is found in the cache persistent store.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/cacheRecords:withMetadata:forKey:fromContext:">+&nbsp;cacheRecords:withMetadata:forKey:fromContext:</a></code>
		<span class="tooltip"><p>This method caches the objectIDs of the given records. Those records should be subclasses of
NSManagedObject. The key provided will be used to locate those records later if a subsequent
request is made for a certain NSURLRequest which you wish to associate with that key.</p></span>
	</span>
	
	
</li>
						</ul>
						
					</div>
					
					
					
					
					
					
					
					<div class="section section-methods">
						<a title="Class Methods" name="class_methods"></a>
						<h2 class="subtitle subtitle-methods">Class Methods</h2>
						
						<div class="section-method">
	<a name="//api/name/cacheRecords:withMetadata:forKey:fromContext:" title="cacheRecords:withMetadata:forKey:fromContext:"></a>
	<h3 class="subsubtitle method-title">cacheRecords:withMetadata:forKey:fromContext:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>This method caches the objectIDs of the given records. Those records should be subclasses of
NSManagedObject. The key provided will be used to locate those records later if a subsequent
request is made for a certain NSURLRequest which you wish to associate with that key.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>+ (void)cacheRecords:(NSArray *)<em>records</em> withMetadata:(NSDictionary *)<em>metadata</em> forKey:(NSString *)<em>key</em> fromContext:(NSManagedObjectContext *)<em>context</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>records</em></dt>
			<dd><p>An array of records that should be cached.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>metadata</em></dt>
			<dd><p>Metadata contained in the response that should also be cached.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>key</em></dt>
			<dd><p>A key that will be associated with and used to identify cached results.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>context</em></dt>
			<dd><p>A managed object context where these records exist.</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>This method caches the objectIDs of the given records. Those records should be subclasses of
NSManagedObject. The key provided will be used to locate those records later if a subsequent
request is made for a certain NSURLRequest which you wish to associate with that key.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">MMRecordCache.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/getCachedResultsForRequest:cacheKey:metaKeyPath:context:cacheResultBlock:" title="getCachedResultsForRequest:cacheKey:metaKeyPath:context:cacheResultBlock:"></a>
	<h3 class="subsubtitle method-title">getCachedResultsForRequest:cacheKey:metaKeyPath:context:cacheResultBlock:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>This method retrieves cached results in a given context. If results are cached, it will fetch
those objectIDs from the internal caching persistent store and attempt to obtain records matching
those object IDs in the provided managed object context. Those records, along with the cached
response object (if any) will be returned in the cache result block. This method will also respect
the caching policy of the NSURLCache and of this NSURLRequest. If the response for that request is
not cached, no results will be returned &ndash; regardless of what is found in the cache persistent store.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>+ (void)getCachedResultsForRequest:(NSURLRequest *)<em>request</em> cacheKey:(NSString *)<em>cacheKey</em> metaKeyPath:(NSString *)<em>metaKeyPath</em> context:(NSManagedObjectContext *)<em>context</em> cacheResultBlock:(void ( ^ ) ( NSArray *cachedResults , id responseObject ))<em>cacheResultBlock</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>request</em></dt>
			<dd><p>Request object to obtain cached results for.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>cacheKey</em></dt>
			<dd><p>Key used to identify the cached results.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>metaKeyPath</em></dt>
			<dd><p>Key used to identify metadata that may have been returned in the response.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>context</em></dt>
			<dd><p>managed object context to return cached results in.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>cacheResultBlock</em></dt>
			<dd><p>Result block that will be executed when this method finishes checking for
cached results.</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>This method retrieves cached results in a given context. If results are cached, it will fetch
those objectIDs from the internal caching persistent store and attempt to obtain records matching
those object IDs in the provided managed object context. Those records, along with the cached
response object (if any) will be returned in the cache result block. This method will also respect
the caching policy of the NSURLCache and of this NSURLRequest. If the response for that request is
not cached, no results will be returned &ndash; regardless of what is found in the cache persistent store.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">MMRecordCache.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/hasResultsForKey:" title="hasResultsForKey:"></a>
	<h3 class="subsubtitle method-title">hasResultsForKey:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>This method returns YES if there are cached results for a given key. The key is typically the
absolute URL for a given NSURLRequest. You can specify the key using the cacheRecords method below.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>+ (BOOL)hasResultsForKey:(NSString *)<em>cacheKey</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>cacheKey</em></dt>
			<dd><p>The key used to identify cached results.</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>BOOL YES for has results, NO otherwise.</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>This method returns YES if there are cached results for a given key. The key is typically the
absolute URL for a given NSURLRequest. You can specify the key using the cacheRecords method below.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">MMRecordCache.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
					
					
				</div>
				<div class="main-navigation navigation-bottom">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2014 Mutual Mobile. All rights reserved. (Last updated: 2014-06-27)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.0.5 (build 789)</a>.</span></p>
						
					</div>
				</div>
			</div>
		</article>
		<script type="text/javascript">
			function jumpToChange()
			{
				window.location.hash = this.options[this.selectedIndex].value;
			}
			
			function toggleTOC()
			{
				var contents = document.getElementById('contents');
				var tocContainer = document.getElementById('tocContainer');
				
				if (this.getAttribute('class') == 'open')
				{
					this.setAttribute('class', '');
					contents.setAttribute('class', '');
					tocContainer.setAttribute('class', '');
					
					window.name = "hideTOC";
				}
				else
				{
					this.setAttribute('class', 'open');
					contents.setAttribute('class', 'isShowingTOC');
					tocContainer.setAttribute('class', 'isShowingTOC');
					
					window.name = "";
				}
				return false;
			}
			
			function toggleTOCEntryChildren(e)
			{
				e.stopPropagation();
				var currentClass = this.getAttribute('class');
				if (currentClass == 'children') {
					this.setAttribute('class', 'children open');
				}
				else if (currentClass == 'children open') {
					this.setAttribute('class', 'children');
				}
				return false;
			}
			
			function tocEntryClick(e)
			{
				e.stopPropagation();
				return true;
			}
			
			function init()
			{
				var selectElement = document.getElementById('jumpTo');
				selectElement.addEventListener('change', jumpToChange, false);
				
				var tocButton = document.getElementById('table_of_contents');
				tocButton.addEventListener('click', toggleTOC, false);
				
				var taskTreeItem = document.getElementById('task_treeitem');
				if (taskTreeItem.getElementsByTagName('li').length > 0)
				{
					taskTreeItem.setAttribute('class', 'children');
					taskTreeItem.firstChild.setAttribute('class', 'disclosure');
				}
				
				var tocList = document.getElementById('toc');
				
				var tocEntries = tocList.getElementsByTagName('li');
				for (var i = 0; i < tocEntries.length; i++) {
					tocEntries[i].addEventListener('click', toggleTOCEntryChildren, false);
				}
				
				var tocLinks = tocList.getElementsByTagName('a');
				for (var i = 0; i < tocLinks.length; i++) {
					tocLinks[i].addEventListener('click', tocEntryClick, false);
				}
				
				if (window.name == "hideTOC") {
					toggleTOC.call(tocButton);
				}
			}
			
			window.onload = init;
			
			// If showing in Xcode, hide the TOC and Header
			if (navigator.userAgent.match(/xcode/i)) {
				document.getElementById("contents").className = "hideInXcode"
				document.getElementById("tocContainer").className = "hideInXcode"
				document.getElementById("top_header").className = "hideInXcode"
			}
			
		</script>
	</body>
</html>